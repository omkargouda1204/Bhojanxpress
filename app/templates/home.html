{% extends "base.html" %}

{% block content %}
<!-- Enhanced Hero Section with Better Animation -->
<div id="mainCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
  </div>
  <div class="carousel-inner rounded-4 shadow-lg">
    <div class="carousel-item active">
      <img src="{{ url_for('static', filename='images/hero-banner.jpg') }}" class="d-block w-100" style="height: 520px; object-fit: cover; filter: brightness(0.7);" alt="Delicious Food">
      <div class="carousel-caption d-md-block position-absolute top-50 start-50 translate-middle text-center w-75 animate__animated animate__fadeIn">
        <h2 class="display-3 fw-bold text-white text-shadow">Welcome to BhojanXpress</h2>
        <p class="lead fs-4 mb-4 text-white">Delicious food delivered fast, fresh, and hot to your doorstep.</p>
        <a href="{{ url_for('user.menu') }}" class="btn btn-warning btn-lg shadow-lg px-5 py-3 animate__animated animate__pulse animate__infinite">Order Now <i class="fas fa-arrow-right ms-2"></i></a>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='images/slide1.jpg') }}" class="d-block w-100" style="height: 520px; object-fit: cover; filter: brightness(0.7);" alt="Tasty Dishes">
      <div class="carousel-caption d-md-block position-absolute top-50 start-50 translate-middle text-center w-75">
        <h2 class="display-4 fw-bold text-white text-shadow">Try Our Bestsellers</h2>
        <p class="fs-4 mb-4 text-white">Handpicked dishes loved by our customers.</p>
        <a href="{{ url_for('user.menu') }}" class="btn btn-primary btn-lg shadow px-5 py-3">Browse Menu <i class="fas fa-utensils ms-2"></i></a>
      </div>
    </div>
    <div class="carousel-item">
      <img src="{{ url_for('static', filename='images/logo.png') }}" class="d-block w-100" style="height: 520px; object-fit: contain; background: linear-gradient(135deg, var(--primary-color) 0%, #e8540d 100%);" alt="BhojanXpress Logo">
      <div class="carousel-caption d-md-block position-absolute top-50 start-50 translate-middle text-center w-75 text-white">
        <h2 class="display-4 fw-bold">Quality &amp; Taste</h2>
        <p class="fs-4 mb-4">Experience the best food delivery in town.</p>
        {% if not current_user.is_authenticated %}
        <a href="{{ url_for('auth.register') }}" class="btn btn-light btn-lg shadow px-5 py-3">Join Now <i class="fas fa-user-plus ms-2"></i></a>
        {% endif %}
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- Round Category Icons Below Slider -->
<section class="container-fluid bg-light py-4 mb-5 round-categories-section">
  <div class="container">
    <h3 class="text-center mb-4 fw-bold text-dark">Browse by Category</h3>
    <div class="row justify-content-center">
      <div class="col-12">
        <div class="category-scroll-container">
          <div class="d-flex category-items-wrapper" id="categoryWrapper">
            {% if categories %}
              {% for category in categories %}
              <div class="category-item text-center mx-3 flex-shrink-0">
                <a href="{{ url_for('user.menu', category=category.name) }}" class="text-decoration-none">
                  <div class="category-card overflow-hidden rounded-4 shadow-sm">
                    <div class="category-image-wrapper">
                      {% if category.image_url %}
                        <img src="{{ category.image_url }}" alt="{{ category.display_name }}" class="category-img">
                      {% else %}
                        <div class="category-placeholder bg-gradient">
                          <i class="fas fa-{{
                            'leaf' if category.name == 'appetizer' else
                            'drumstick-bite' if category.name == 'main_course' else
                            'birthday-cake' if category.name == 'dessert' else
                            'coffee' if category.name == 'beverage' else
                            'cookie-bite' if category.name == 'snacks' else
                            'utensils'
                          }} fa-3x text-white"></i>
                        </div>
                      {% endif %}
                      <div class="category-overlay">
                        <h6 class="category-name text-white fw-bold mb-0">{{ category.display_name }}</h6>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              {% endfor %}
            {% else %}
              <!-- Default categories with placeholder images -->
              {% set default_categories = [
                {'name': 'appetizer', 'display_name': 'Appetizers', 'icon': 'leaf', 'color': '#28a745'},
                {'name': 'main_course', 'display_name': 'Main Course', 'icon': 'drumstick-bite', 'color': '#dc3545'},
                {'name': 'dessert', 'display_name': 'Desserts', 'icon': 'birthday-cake', 'color': '#fd7e14'},
                {'name': 'beverage', 'display_name': 'Beverages', 'icon': 'coffee', 'color': '#6f42c1'},
                {'name': 'snacks', 'display_name': 'Snacks', 'icon': 'cookie-bite', 'color': '#20c997'}
              ] %}
              {% for category in default_categories %}
              <div class="category-item text-center mx-3 flex-shrink-0">
                <a href="{{ url_for('user.menu', category=category.name) }}" class="text-decoration-none">
                  <div class="category-card overflow-hidden rounded-4 shadow-sm">
                    <div class="category-image-wrapper">
                      <div class="category-placeholder" style="background: linear-gradient(135deg, {{ category.color }}, {{ category.color }}dd);">
                        <i class="fas fa-{{ category.icon }} fa-3x text-white"></i>
                      </div>
                      <div class="category-overlay">
                        <h6 class="category-name text-white fw-bold mb-0">{{ category.display_name }}</h6>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Why Choose BhojanXpress Section with Font Awesome Icons -->
<section class="why-choose-section">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-5">
        <h2 class="display-5 fw-bold text-white">Why Choose BhojanXpress?</h2>
        <p class="lead text-white-50">Experience the difference with our premium food delivery service</p>
      </div>
    </div>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card text-center">
          <div class="feature-icon">
            <i class="fas fa-shipping-fast"></i>
          </div>
          <h4 class="feature-title">Lightning Fast Delivery</h4>
          <p class="feature-description">Get your favorite meals delivered in 30 minutes or less. Hot, fresh, and on time - every time!</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card text-center">
          <div class="feature-icon">
            <i class="fas fa-medal"></i>
          </div>
          <h4 class="feature-title">Premium Quality</h4>
          <p class="feature-description">Fresh ingredients, expert chefs, and hygienic preparation ensure every bite is delicious and safe.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card text-center">
          <div class="feature-icon">
            <i class="fas fa-headset"></i>
          </div>
          <h4 class="feature-title">24/7 Support</h4>
          <p class="feature-description">Our dedicated customer support team is always ready to help you with your orders and queries.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Featured Food Items Section -->
{% if featured_items %}
<section class="container my-5">
    <div class="d-flex align-items-center justify-content-between mb-4">
        <h2 class="mb-0 fw-bold">Featured Menu Items</h2>
        <a href="{{ url_for('user.menu') }}" class="btn btn-outline-primary">View All <i class="fas fa-arrow-right ms-1"></i></a>
    </div>


    <div class="row g-4">
        {% for item in featured_items %}
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 food-card border-0 shadow-sm rounded-4 overflow-hidden">
                <!-- Make the image clickable -->
                <a href="{{ url_for('user.food_detail', food_id=item.id) }}" class="position-relative">
                    {% if item.image_url %}
                    <img src="{{ item.image_url }}" alt="{{ item.name }}" class="card-img-top food-img" style="height: 180px; object-fit: cover;">
                    {% elif item.image_path %}
                    <img src="{{ url_for('static', filename=item.image_path) }}" alt="{{ item.name }}" class="card-img-top food-img" style="height: 180px; object-fit: cover;">
                    {% else %}
                    <div class="bg-light d-flex align-items-center justify-content-center" style="height: 180px;">
                        <i class="fas fa-utensils fa-2x text-secondary"></i>
                    </div>
                    {% endif %}

                    <span class="badge rounded-pill position-absolute top-0 end-0 m-3 {% if item.is_available %}bg-success{% else %}bg-danger{% endif %}">
                        {% if item.is_available %}Available{% else %}Sold Out{% endif %}
                    </span>
                </a>

                <div class="card-body d-flex flex-column">
                    <!-- Make the title clickable -->
                    <a href="{{ url_for('user.food_detail', food_id=item.id) }}" class="text-decoration-none text-dark">
                        <h5 class="card-title mb-2">{{ item.name }}</h5>
                    </a>
                    <p class="card-text text-muted small mb-3">{{ item.description|truncate(60) }}</p>
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                        <span class="fw-bold text-primary">₹{{ "%.2f"|format(item.price) }}</span>
                        <!-- Add Cart Button -->
                        {% if item.is_available %}
                        <button onclick="addToCart({{ item.id }}, '{{ item.name }}', {{ item.price }})" class="btn btn-warning">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                        {% else %}
                        <button class="btn btn-secondary" disabled>
                            <i class="fas fa-shopping-cart"></i> Sold Out
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}



<!-- Category Food Items -->
{% if category_items %}
{% for category_name, items in category_items.items() %}
{% if items %}
<section class="container my-5">
    {% set category_obj = categories|selectattr('name', 'equalto', category_name)|first %}
    <div class="d-flex align-items-center justify-content-between mb-4">
        <h2 class="mb-0">{{ category_obj.display_name }}</h2>
        <a href="{{ url_for('user.menu', category=category_name) }}" class="btn btn-outline-primary">View All <i class="fas fa-arrow-right ms-1"></i></a>
    </div>
    <div class="row g-4">
        {% for item in items %}
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 food-card border-0 shadow-sm rounded-4 overflow-hidden">
                <div class="position-relative">
                    {% if item.image_url %}
                    <img src="{{ item.image_url }}" alt="{{ item.name }}" class="card-img-top food-img" style="height: 180px; object-fit: cover;">
                    {% elif item.image_path %}
                    <img src="{{ url_for('static', filename=item.image_path) }}" alt="{{ item.name }}" class="card-img-top food-img" style="height: 180px; object-fit: cover;">
                    {% else %}
                    <div class="bg-light d-flex align-items-center justify-content-center" style="height: 180px;">
                        <i class="fas fa-utensils fa-2x text-secondary"></i>
                    </div>
                    {% endif %}

                    <span class="badge rounded-pill position-absolute top-0 end-0 m-3 {% if item.is_available %}bg-success{% else %}bg-danger{% endif %}">
                        {% if item.is_available %}Available{% else %}Sold Out{% endif %}
                    </span>
                </div>

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title mb-2">{{ item.name }}</h5>
                    <p class="card-text text-muted small mb-3">{{ item.description|truncate(60) }}</p>
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                        <span class="fw-bold text-primary">₹{{ "%.2f"|format(item.price) }}</span>
                        <a href="{{ url_for('user.food_detail', food_id=item.id) }}" class="btn btn-sm btn-primary">
                            <i class="fas fa-info-circle me-1"></i> Details
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}
{% endfor %}
{% endif %}

<!-- Special Offers Section -->
<section class="container-fluid py-5 mb-5" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center mb-4">
        <h2 class="display-5 fw-bold text-white mb-3">
          <i class="fas fa-fire text-warning"></i> Special Offers
        </h2>
        <p class="lead text-white">Don't miss out on these amazing deals!</p>
      </div>
    </div>

    {% if active_coupons %}
    <div class="row justify-content-center">
      {% for coupon in active_coupons %}
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="card bg-white shadow-lg border-0 h-100 offer-card">
          <div class="card-body text-center p-4">
            <div class="offer-badge mb-3">
              <span class="badge bg-danger fs-6 px-3 py-2">
                {% if coupon.discount_type == 'percentage' %}
                  {{ coupon.discount_value|int }}% OFF
                {% else %}
                  ₹{{ coupon.discount_value|int }} OFF
                {% endif %}
              </span>
            </div>
            <h5 class="card-title fw-bold text-primary">{{ coupon.code }}</h5>
            <p class="card-text text-muted">{{ coupon.description or 'Special discount offer' }}</p>
            {% if coupon.min_order_amount %}
            <p class="small text-success">
              <i class="fas fa-info-circle"></i> Min order: ₹{{ coupon.min_order_amount }}
            </p>
            {% endif %}
            <div class="offer-actions mt-3">
              <button class="btn btn-outline-primary btn-sm copy-coupon" data-coupon="{{ coupon.code }}">
                <i class="fas fa-copy"></i> Copy Code
              </button>
              <a href="{{ url_for('user.menu') }}" class="btn btn-primary btn-sm">
                <i class="fas fa-shopping-cart"></i> Order Now
              </a>
            </div>
            <small class="text-muted d-block mt-2">
              Valid until {{ coupon.valid_until.strftime('%d %b %Y') }}
            </small>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="row justify-content-center">
      <div class="col-md-6 text-center">
        <div class="card bg-white shadow border-0">
          <div class="card-body p-4">
            <i class="fas fa-gift fa-3x text-warning mb-3"></i>
            <h5 class="text-muted">No Special Offers Available</h5>
            <p class="text-muted">Check back soon for exciting deals!</p>
            <a href="{{ url_for('user.menu') }}" class="btn btn-primary">
              <i class="fas fa-utensils"></i> Browse Menu
            </a>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    .text-shadow {
        text-shadow: 2px 2px 4px rgba(0,0,0,0.6);
    }

    .food-card {
        transition: all 0.3s ease;
    }

    .food-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
    }

    .food-img {
        transition: all 0.5s ease;
    }

    .food-card:hover .food-img {
        transform: scale(1.05);
    }

    .category-card {
        transition: all 0.3s ease;
    }

    .category-link:hover .category-card {
        transform: translateY(-5px);
    }

    .category-card .card-img-wrapper::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.7) 100%);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .category-link:hover .category-card .card-img-wrapper::after {
        opacity: 1;
    }

    .special-offer {
        transition: all 0.3s ease;
    }

    .special-offer:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
    }

    /* Animation for "Order Now" button */
    .animate__pulse {
        animation-duration: 2s !important;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
        }
        50% {
            transform: scale(1.05);
        }
        100% {
            transform: scale(1);
        }
    }

    /* Styles for round category icons */
    .round-categories-section {
        margin-top: -30px;
        position: relative;
        z-index: 10;
        background-color: #f8f9fa;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        padding: 30px 0;
    }

    /* Enhanced category styling to fix display issues */
    .category-item {
        min-width: 150px;
        flex-shrink: 0;
    }

    .category-card {
        width: 150px;
        height: 150px;
        position: relative;
        transition: all 0.3s ease;
        cursor: pointer;
        overflow: hidden;
        border: 2px solid #f8f9fa;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .category-card:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
        border-color: #fd7e14;
    }

    .category-image-wrapper {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #fd7e14, #e8540d);
    }

    .category-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: all 0.3s ease;
    }

    .category-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #fd7e14, #e8540d);
    }

    .category-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0,0,0,0.8));
        padding: 15px 10px 10px;
        transform: translateY(0); /* Always show the category name */
    }

    .category-name {
        font-size: 0.9rem;
        margin: 0;
        text-align: center;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.8); /* Improve text visibility */
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .category-scroll-container::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .category-scroll-container {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }

    /* Touch scrolling for mobile */
    .category-scroll-container {
        -webkit-overflow-scrolling: touch;
    }

    /* Styles for special offers section */
    .offer-card {
        transition: all 0.3s ease;
    }

    .offer-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
    }

    .offer-badge {
        position: relative;
        display: inline-block;
        padding: 0.5rem 1rem;
        margin-bottom: 1rem;
        border-radius: 1.5rem;
        font-size: 0.875rem;
        font-weight: 500;
        color: white;
    }

    .offer-badge::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 1.5rem;
        transform: translate(-50%, -50%) scale(0);
        transition: all 0.3s ease;
    }

    .offer-card:hover .offer-badge::after {
        transform: translate(-50%, -50%) scale(1);
    }

    .copy-coupon {
        cursor: pointer;
    }

    /* Styles for category scrolling */
    .category-scroll-container {
        overflow-x: auto;
        white-space: nowrap;
        padding: 10px 0;
        /* Enable smooth scrolling */
        scroll-behavior: smooth;
    }

    .category-items-wrapper {
        display: inline-flex;
        align-items: center;
        gap: 20px;
    }

    .category-item {
        min-width: 150px;
        flex-shrink: 0;
    }

    .category-card {
        width: 150px;
        height: 150px;
        position: relative;
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .category-card:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
    }

    .category-image-wrapper {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
    }

    .category-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: all 0.3s ease;
    }

    .category-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #fd7e14, #e8540d);
    }

    .category-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0,0,0,0.8));
        padding: 15px 10px 10px;
        transform: translateY(100%);
        transition: all 0.3s ease;
    }

    .category-card:hover .category-overlay {
        transform: translateY(0);
    }

    .category-name {
        font-size: 0.9rem;
        margin: 0;
        text-align: center;
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .category-scroll-container::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .category-scroll-container {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }

    /* Touch scrolling for mobile */
    .category-scroll-container {
        -webkit-overflow-scrolling: touch;
    }

    /* Styles for special offers scrolling */
    .special-offers-container {
        overflow-x: auto;
        white-space: nowrap;
        padding: 10px 0;
        position: relative;
    }

    .special-offers-scroll-area {
        display: inline-flex;
        align-items: center;
        gap: 20px;
    }

    .special-offer-card {
        min-width: 250px;
        flex-shrink: 0;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .special-offer-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15) !important;
    }

    .offer-content {
        padding: 20px;
        text-align: center;
    }

    .offer-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin: 0 0 10px;
    }

    .offer-description {
        font-size: 0.875rem;
        color: #666;
        margin: 0 0 15px;
    }

    .offer-validity {
        font-size: 0.75rem;
        color: #999;
        margin: 0 0 15px;
    }

    .copy-code {
        cursor: pointer;
    }

    /* Hide scrollbar for special offers scrolling */
    .special-offers-container::-webkit-scrollbar {
        display: none;
    }

    .special-offers-container {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add animations to elements when they come into view
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('animate__animated', 'animate__fadeIn');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Observe section headings
    document.querySelectorAll('section h2').forEach(el => {
        observer.observe(el);
    });

    // Copy coupon code to clipboard
    document.querySelectorAll('.copy-coupon').forEach(button => {
        button.addEventListener('click', function() {
            const couponCode = this.getAttribute('data-coupon');
            navigator.clipboard.writeText(couponCode).then(() => {
                alert('Coupon code copied: ' + couponCode);
            }, (err) => {
                console.error('Could not copy text: ', err);
            });
        });
    });

    // Copy code button functionality in special offers section
    document.querySelectorAll('.copy-code').forEach(button => {
        button.addEventListener('click', function() {
            const code = this.getAttribute('data-code');
            navigator.clipboard.writeText(code).then(() => {
                alert('Coupon code copied: ' + code);
            }, (err) => {
                console.error('Could not copy text: ', err);
            });
        });
    });
});
</script>
{% endblock %}
